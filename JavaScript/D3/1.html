<!doctype html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <title></title>
        <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    </head>
    <body>
        <button id="updateBt">업데이트</button>
        <svg id="mygraph">
            <!--<rect x="10", y="30", width="100", height="100">-->
        </svg>
        <script>
            var data = [300, 130, 10, 60, 234];
            var data2 = [20, 240, 140, 10, 20]
            /*
            d3.select("#mygraph")
                .append("rect")
                .attr("x", 10)
                .attr("y", 20)
                .attr("width", data[0])
                .attr("height", "20px")
            */
           /* 애니메이션
           d3.select("#mygraph")
                .selectAll("rect")
                .data(data)
                .enter()
                .append("rect")
                .attr("y", function(d, i) {
                    return i * 20;
                })
                .attr("height", "20px")
                .attr("x", 0)
                .attr("width", "0px")
                .transition()
                .delay(function(d, i) {
                    return i * 500;
                })
                .duration(2500)
                .attr("width", function(d, i) {
                            return d + "px";
                });
            */
            d3.select("#mygraph")
                .selectAll("rect")
                .data(data)
                .enter()
                .append("rect")
                .attr("y", function(d, i) {
                    return i * 20;
                })
                .attr("height", "20px")
                .attr("x", 0)
                .attr("width", function(d, i) {
                            return d + "px";
                })
                .on("click", function() {
                    d3.select(this)
                        .style("fill", "cyan")
                });
                
            d3.select("#updateBt")
                .on("click", function() {
                    for(var i = 0; i < data.length; i++) {
                        data[i] = Math.floor(Math.random() * 320);
                    }
                    
                    d3.select("#mygraph")
                        .selectAll("rect")
                        .data(data)
                        .transition()
                        .attr("width", function(d, i) {
                            return d + "px";
                         })
                })
        </script>
    </body>
</html>